<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Triplesec test</title>

<script src="https://keybase.io/triplesec/rel/triplesec-3.0.0-min.js"></script>

<script>
function encryptFileData(fileData, passcode, callback) {
  var data = new triplesec.Buffer(fileData);
  var key = new triplesec.Buffer(passcode);

  triplesec.encrypt({key:key, data:data}, callback);
}

function decryptFileData(cipherDataBase64, passcode, callback) {
  var data = new triplesec.Buffer(cipherDataBase64, 'base64');
  var key = new triplesec.Buffer(passcode);

  triplesec.decrypt({key:key, data:data}, callback);
}

function encryptMessage() {
  var plainText = document.getElementById("inputData").value;
  var password = document.getElementById("password").value;

  console.log('Plaintext:', plainText);
  console.log('Password:', password);

  encryptFileData(plainText, password, function (err, cipherText) {
    var cipherDataBase64 = cipherText.toString('base64');
    console.log('Encrypted:', cipherDataBase64);

    decryptFileData(cipherDataBase64, password, function (err, decrypted) {
      console.log('Decrypted:', decrypted.toString());
    });
  
  });
}
</script>

</head>
<body>

  Message <input name="inputData" type="text" id="inputData" /> <br />
  Password <input name="password" type="text" id="password" /> <br />
  <button onclick="encryptMessage();">Encrypt</button>

</body>
</html>
